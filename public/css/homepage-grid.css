/* ==========================================================================
   homepage-grid.css — quicker + extra depth
   - Snappier transitions (0.18s–0.22s)
   - Stronger hover depth with layered shadow & glow
   - Preserves full-bleed + mobile behaviour
   ========================================================================== */

/* ---------------- VARIABLES ---------------- */
:root {
    --hero-top-offset: 130px;
    --hero-top-offset-mobile: 120px;
    --grid-gap: clamp(0.6rem, 1.2vw, 1.2rem);
    --grid-padding: clamp(0.6rem, 1.6vw, 2rem);
    --grid-entrance-duration: 400ms;
    --grid-entrance-stagger: 0.04s;
    --grid-item-bg: rgba(255,255,255,0.04);
    --grid-item-hover-bg: rgba(255,255,255,0.06);
    --grid-item-min-height: 120px;
    --grid-item-max-height-vh: 40vh;
    --mobile-item-min-height: clamp(160px, 28vh, 360px);

    /* glow color for extra depth (tweak alpha or hue) */
    --grid-hover-glow: rgba(100, 150, 255, 0.10); /* cool bluish glow */
}

/* ---------------- RESET ---------------- */
html, body { height:100%; margin:0; padding:0; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

.hero { position:relative; width:100%; height:100vh; overflow:hidden; background-repeat:no-repeat; background-position:center; background-size:cover; }

/* ---------------- WRAPPER ---------------- */
.hero-grid-wrap {
    position: absolute;
    left: 0; right: 0;
    top: var(--hero-top-offset);
    width: 100vw;
    height: calc(100vh - var(--hero-top-offset));
    max-height: calc(100vh - var(--hero-top-offset));
    display: flex;
    align-items: stretch;
    justify-content: center;
    padding: 0;
    box-sizing: border-box;
    z-index: 20;
    pointer-events: auto;
    overflow: hidden;
}

/* ---------------- GRID ---------------- */
.home-grid {
    width:100%; max-width:100%; height:100%;
    display:grid;
    gap: var(--grid-gap);
    padding: var(--grid-padding);
    box-sizing:border-box; margin:0;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    align-items:stretch; justify-items:stretch; overflow:hidden;
}

/* ---------------- GRID ITEM (baseline) ---------------- */
.grid-item {
    width:100%; height:100%; min-width:0; min-height:0; box-sizing:border-box;
    background: transparent; border-radius:12px;
    color: rgba(255,255,255,0);
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    text-align:center; padding:1rem; overflow:hidden; cursor:default;
    min-height: var(--grid-item-min-height);
    max-height: var(--grid-item-max-height-vh);

    /* faster transitions */
    transition:
            opacity 0.18s cubic-bezier(0.4,0,0.2,1),
            background 0.18s cubic-bezier(0.4,0,0.2,1),
            color 0.18s cubic-bezier(0.4,0,0.2,1),
            transform 0.18s cubic-bezier(0.4,0,0.2,1),
            box-shadow 0.22s cubic-bezier(0.4,0,0.2,1),
            backdrop-filter 0.22s cubic-bezier(0.4,0,0.2,1);
    opacity:0;
    position:relative; /* for ::after glow layer */
}

/* glow pseudo-element adds extra depth around hovered tile */
.grid-item::after {
    content: "";
    position: absolute;
    inset: -6px;                 /* extends glow beyond border-radius slightly */
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    transform: scale(1);
    transition: opacity 0.22s cubic-bezier(0.4,0,0.2,1), transform 0.22s cubic-bezier(0.4,0,0.2,1);
    box-shadow: 0 24px 64px rgba(0,0,0,0.35); /* baseline deep shadow behind glow */
    background: radial-gradient(60% 40% at 50% 40%, var(--grid-hover-glow), transparent 60%);
    mix-blend-mode: screen;
    z-index: -1;
}

/* thumbnails / images */
.thumb-module img {
    width:100%; height:100%; object-fit:cover; display:block; border-radius:inherit;
    opacity:0; transition: opacity 0.18s cubic-bezier(0.4,0,0.2,1), transform 0.22s ease-out;
}

/* buttons hidden baseline */
.grid-btn {
    background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.12);
    padding:0.6rem 1rem; border-radius:8px; color: rgba(255,255,255,0);
    font-weight:600; transition: background 140ms ease, color 140ms ease, transform 140ms ease;
}

/* ---------- Inactive grid item: always transparent and non-interactive ---------- */
.grid-item.inactive {
    opacity: 0 !important;            /* always invisible */
    background: transparent !important;
    color: transparent !important;
    pointer-events: none !important;  /* no clicks, hovers, focus */
    user-select: none;
    touch-action: none;
    animation: none !important;       /* don't participate in entrance animations */
    transition: none !important;      /* no transitions either */
}

/* ---------------- HOVER / FOCUS: reveal only hovered item ---------------- */
/* non-hovered items stay hidden */
.home-grid:hover .grid-item:not(.inactive) {
    /* existing behavior for non-inactive items */
    opacity: 0;
    background: transparent;
    color: rgba(255,255,255,0);
}

/* hovered item: quicker reveal + deeper depth */
.grid-item:not(.inactive):hover,
.grid-item:not(.inactive):focus-within,
.grid-item:not(.inactive):focus {
    opacity: 1 !important;
    background: var(--grid-item-hover-bg);
    color: rgba(255,255,255,0.96);
    transform: scale(1.028); /* subtle lift */
    box-shadow:
            0 6px 18px rgba(0,0,0,0.28),
            0 18px 46px rgba(0,0,0,0.42),
            0 40px 120px rgba(0,0,0,0.32); /* layered deeper shadows for extra depth */
    backdrop-filter: blur(10px);
    transition-duration: 0.18s;
}

/* activate glow pseudo element quickly */
.grid-item:hover::after {
    opacity: 1;
    transform: scale(1.02);
}

/* inner reveals */
.grid-item:not(.inactive):hover img { opacity:1; transform: scale(1.03); }
.grid-item:not(.inactive):hover .grid-btn { color:#fff; background: rgba(255,255,255,0.14); transform: translateY(-3px); }

/* keyboard focus */
.grid-item:focus { outline:none; }
.grid-item:focus-visible { outline: none; }

/* ---------------- ENTRANCE ANIMATION (snappier) ---------------- */
.grid-item:not(.inactive) {
    animation: gridFadeIn var(--grid-entrance-duration) cubic-bezier(0.4,0,0.2,1) forwards;
    animation-delay: calc(var(--i,0) * var(--grid-entrance-stagger));
}
@keyframes gridFadeIn {
    0%   { opacity:0; transform: scale(0.96); filter: blur(4px); }
    60%  { opacity:0.12; transform: scale(1.01); filter: blur(1px); }
    100% { opacity:0; transform: scale(1); filter: blur(0); }
}

/* ---------------- RESPONSIVE BREAKPOINTS ---------------- */
@media (max-width:1100px) {
    :root { --grid-padding: clamp(0.5rem,2vw,1.2rem); }
    .home-grid { grid-template-columns: repeat(2,1fr); grid-template-rows: repeat(3,1fr); }
    .grid-item { max-height: 45vh; }
}

/* MOBILE: 1x9 vertical scroll; items visible by default; touch-friendly */
@media (max-width:640px) {
    :root { --hero-top-offset: var(--hero-top-offset-mobile); --grid-gap:0.6rem; --grid-padding:0.9rem; }

    .hero-grid-wrap {
        top: var(--hero-top-offset);
        height: calc(100vh - var(--hero-top-offset));
        max-height: calc(100vh - var(--hero-top-offset));
        overflow-y: auto; -webkit-overflow-scrolling: touch;
        align-items:flex-start; justify-content:flex-start; padding-bottom: env(safe-area-inset-bottom,16px);
    }

    .home-grid {
        display:grid; grid-template-columns: 1fr; grid-template-rows: none; height:auto; max-height:none;
        gap: var(--grid-gap); padding: var(--grid-padding); overflow:visible;
    }

    .grid-item {
        opacity:1; background: var(--grid-item-bg); color: rgba(255,255,255,0.95);
        transform:none; min-height: var(--mobile-item-min-height); max-height:70vh; height:auto;
        animation:none;
        box-shadow: 0 6px 18px rgba(0,0,0,0.28);
    }

    .thumb-module img { height:auto; object-fit:cover; opacity:1; }
    .grid-btn { color:#fff; background: rgba(255,255,255,0.10); }

    .grid-item:hover { transform:none; box-shadow: 0 8px 20px rgba(0,0,0,0.34); }
    .grid-item:active { transform: scale(0.998); }
}

/* large screens comfort */
@media (min-width:1600px) {
    :root { --grid-padding: clamp(1rem,2.2vw,3rem); --grid-gap: clamp(1rem,1.6vw,2rem); }
    .grid-item { min-height:160px; max-height:33vh; }
}

/* ---------------- ASPECT / GUARDRAILS ---------------- */
@supports (aspect-ratio:1/1) {
    .grid-item { aspect-ratio: 4/3; }
    @media (max-width:1100px) { .grid-item { aspect-ratio: 3/4; } }
    @media (max-width:640px) { .grid-item { aspect-ratio: auto; } }
    @media (min-width:1600px) { .grid-item { aspect-ratio: 16/9; } }
}

/* ---------------- HEADER SAFETY ---------------- */
.home-header { position:absolute; top:0; left:0; width:100%; z-index:50; pointer-events:none; }
