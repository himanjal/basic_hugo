{{ define "main" }}

{{/* =========================
ASSET SETUP
========================= */}}

{{ $background := .Param "background" }}
{{ $bg := "" }}
{{ with resources.GetMatch $background }}
{{ $bg = (.Resize "2400x").RelPermalink }}
{{ end }}

{{/* =========================
ANIMATION CONFIGURATION
========================= */}}

{{ $slices := 15 }}

{{ $randomOrder := false }}      {{/* true = shuffle slices, false = sequential */}}
{{ $randomVertical := false }}   {{/* true = alternate up/down, false = all same way */}}
{{ $randomSpeed := false }}      {{/* true = variable speeds, false = uniform */}}

{{/* =========================
DERIVED DATA
========================= */}}

{{/* Generate the order list based on config */}}
{{ $order := cond $randomOrder (shuffle (seq 1 $slices)) (seq 1 $slices) }}

{{/* =========================
HERO CONTAINER
========================= */}}

<div class="hero-root"
     data-bg="{{ $bg }}"
     style="
       --slice-count: {{ $slices }};
       --random-speed: {{ if $randomSpeed }}1{{ else }}0{{ end }};
     ">

    <div class="hero-bg" style="background-image: url('{{ $bg }}');"></div>

    <div class="hero-slices" aria-hidden="true">
        {{ range $i, $idx := seq 0 (sub $slices 1) }}

        {{/* Logic restored from your original file */}}

        {{/* Reveal Order */}}
        {{ $orderIndex := index $order $idx }}

        {{/* Easing Curve Variant (0, 1, or 2) */}}
        {{ $curve := mod $idx 3 }}

        {{/* Vertical Direction (1 or -1) */}}
        {{ $vdir := cond $randomVertical (cond (eq (mod $idx 2) 0) 1 -1) 1 }}

        {{/* Speed Multiplier */}}
        {{ $speed := cond $randomSpeed (add 0.8 (mul (mod $idx 3) 0.15)) 1 }}

        <div class="hero-slice"
             style="
                   --order: {{ $orderIndex }};
                   --curve: {{ $curve }};
                   --vdir: {{ $vdir }};
                   --speed: {{ $speed }};
                 ">
        </div>

        {{ end }}
    </div>

    <section class="hero">
        <div class="glass-grid">

            <div class="glass-box box-info">
                <h3>Who am I?</h3>
                <div class="typewriter-container">
                    <p class="typewriter-text">Software Engineer by trade. World explorer by nature.
                        Currently, probably backpacking through some mountain range without any connectivity.</p>
                </div>
            </div>

            <a href="/gallery" class="glass-box box-link box-gallery">
                <span class="pill-btn">View gallery</span>
            </a>

            <a href="/playground" class="glass-box box-link box-playground">
                <span class="pill-btn">Explore Playground</span>
            </a>

        </div>
    </section>

</div>

{{ end }}