{{ define "main" }}

{{ $background := .Param "background" }}
{{ $bg := $background }}
{{ with resources.GetMatch $background }}
{{ $bg = (.Resize "2400x").RelPermalink }}
{{ end }}

{{/* =========================
SLICE CONFIG (ONE PLACE)
========================= */}}
{{ $slices := 18 }}

<!-- ROOT WRAPPER (shares CSS vars) -->
<div class="hero-root" style="--slice-count: {{ $slices }};">

    <!-- REAL BACKGROUND -->
    <div
            class="hero-bg"
            style="background-image: url('{{ $bg }}');">
    </div>

    <!-- MASK SLICES -->
    <div class="hero-slices" aria-hidden="true">
        {{ range seq 1 $slices }}
        <div class="hero-slice" style="--i: {{ . }}"></div>
        {{ end }}
    </div>

    <!-- FOREGROUND -->
    <section class="hero">
        {{ partial "header.html" . }}
    </section>

</div>

{{ end }}
