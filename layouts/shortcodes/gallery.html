{{ $dir := .Get "dir" | default "images" }}
{{ $images := resources.Match (printf "%s/*" $dir) }}
{{ if not $images }}
<p>No images found in "{{ $dir }}"</p>
{{ else }}
<div class="gallery-grid">
    {{ range $images }}
    {{ $thumb := .Fit "640x640" }}
    <figure class="gallery-item">
        <a href="{{ .RelPermalink }}">
            <img src="{{ $thumb.RelPermalink }}" alt="{{ .Name }}" loading="lazy" />
        </a>
        <figcaption>{{ .Name }}</figcaption>
    </figure>
    {{ end }}
</div>
{{ end }}