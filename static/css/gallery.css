/* static/css/gallery.css
   Stack-style carousel: absolute stack, transforms for smooth sliding
   Images scale to fully cover the frame. Visible slide-in/out animations.
*/

:root{
    --page-bg: #fbfcfd;;
    --frame-bg: #fff;
    --outer-pad: clamp(36px,6vw,120px);
    --card-radius: 18px;
    --scroller-aspect: 3/2;
    --anim-ms: 560ms;   /* longer for slower, smoother slide */
    --anim-ease: cubic-bezier(.2,.9,.25,1);
}

/* Page layout */
html,body{height:100%;margin:0}
body.gallery-page{background:var(--page-bg);-webkit-font-smoothing:antialiased}
.gallery-wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:var(--outer-pad);
    box-sizing:border-box;
}

/* Frame */
.scroller-outer{
    width: min(calc(100% - (var(--outer-pad) * 2)), calc((100vh - (var(--outer-pad) * 2)) * 1.5));
    max-width:1600px;
    aspect-ratio: var(--scroller-aspect);
    background:var(--frame-bg);
    border-radius:var(--card-radius);
    margin: 0 auto 40px;
    overflow:hidden;
    position:relative;
    z-index:6;

    /* Prevent the frame/container from animating â€” slides will still animate as before */
    transition: none !important;
    animation: none !important;
    will-change: auto !important;
}


/* The stack container */
.peeler{
    width:100%;
    height:100%;
    position:relative;
    touch-action: pan-y;
    -webkit-user-select:none;

    /* Prevent container from animating while allowing slide transitions to run
       Slides (.peel-slide and descendants) still have their transitions intact. */
    transition: none !important;
    animation: none !important;
    will-change: auto !important;
    contain: paint;
}

/* Slide basics */
.peel-slide{
    position:absolute;
    inset:0;
    box-sizing:border-box;
    margin:0;
    padding:0;
    border-radius:inherit;
    will-change: transform, opacity;
    pointer-events: none;
    transform: translateX(0);
    opacity: 1;
    transition: transform var(--anim-ms) var(--anim-ease), opacity calc(var(--anim-ms)/1.8) var(--anim-ease);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    backface-visibility:hidden;
}

.peel-inner{
    width:100%;
    height:100%;
    display:block;
    position:relative;
}

.peel-img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    transform: translateZ(0);
    user-select:none;
    -webkit-user-drag: none;
    transition: transform calc(var(--anim-ms)*1.1) var(--anim-ease);
}

.peel-center    { transform: translateX(0); opacity: 1; pointer-events: auto; z-index:30; }
.peel-off-right { transform: translateX(100%); opacity: 1; z-index:20; }
.peel-off-left  { transform: translateX(-100%); opacity: 1; z-index:20; }
.peel-far-right { transform: translateX(200%); opacity: 0; z-index:10; pointer-events:none; }
.peel-far-left  { transform: translateX(-200%); opacity: 0; z-index:10; pointer-events:none; }

.peel-center .peel-img { transform: scale(1.02); }
.peel-slide:not(.peel-center) .peel-img { transform: scale(1); filter: saturate(.98) contrast(.98); }

.peel-slide:focus { outline: 3px solid rgba(255,255,255,0.06); box-shadow: 0 8px 24px rgba(0,0,0,0.18); }

.peeler::-webkit-scrollbar { display: none; height:0; width:0; }
.peeler { -ms-overflow-style: none; scrollbar-width: none; }

@media (max-width:640px){
    :root{ --outer-pad: clamp(1px,2vw,1px);
        --scroller-aspect: 3/4;
        --card-radius:12px;
        --anim-ms: 420ms; }

    .gallery-wrap {
        padding-top: clamp(100px, 5vw, 48px);
    }
}

.no-images { text-align:center; padding:2rem; color:#222; }

/* Force-disable any animations/transitions on the container and its non-slide children.
   This prevents the container from animating while keeping .peel-slide and its descendants
   free to animate as intended. */
.scroller-outer { transition: none; animation: none; will-change: auto; }


/* If any parent (like .gallery-wrap or .site-main) uses flexbox,
   force vertical stacking */
.gallery-wrap,
.site-main {
    display: flex;
    flex-direction: column;
    gap: 32px;               /* optional visual breathing space */
}

/* Prevent floats from affecting the next section */
.scroller-outer::after {
    content: "";
    display: block;
    clear: both;
}

/*!* Ensure carousel is a full-width block element *!*/
/*.gallery-wrap,*/
/*.scroller-outer,*/
/*#peeler {*/
/*    display: block;*/
/*    width: 100%;*/
/*    box-sizing: border-box;*/
/*}*/



/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
    .peel-slide, .peel-img { transition: none !important; animation: none !important; }
}
