/* 04-grid-item.css â€” Hover-blur grid items (hero included) */

.grid-item {
    width: 100%;
    height: 100%;
    min-width: 0;
    box-sizing: border-box;
    background: var(--grid-item-bg);
    border-radius: var(--tile-radius);
    color: rgba(255,255,255,0);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 0;
    overflow: hidden;
    cursor: default;
    min-height: var(--grid-item-min-height);
    max-height: var(--grid-item-max-height-vh);
    transition:
            opacity var(--trans-fast),
            transform var(--trans-fast),
            color var(--trans-fast),
            background var(--trans-fast),
            box-shadow var(--trans-fast);
    will-change: transform, opacity;
    transform: translateZ(0);
    position: relative;
    opacity: 0; /* invisible by default */
    container-type: size;
    container-name: grid-item;
}

/* inactive tiles */
.grid-item.inactive {
    opacity: 0 !important;
    background: transparent !important;
    color: transparent !important;
    pointer-events: none !important;
    user-select: none;
    touch-action: none;
    animation: none !important;
    transition: none !important;
}

/* Only visible when hovering a tile */
.grid-item:not(.inactive):hover,
.grid-item:not(.inactive):focus,
.grid-item:not(.inactive):focus-within {
    opacity: 1 !important;
    color: rgba(255,255,255,0.96);
    background: var(--grid-item-hover-bg);
    transform: translateZ(0) translateY(var(--tile-hover-lift)) scale(1.028);
    box-shadow: var(--shadow-top), var(--shadow-mid), var(--shadow-deep);
    transition-duration: 0.16s;

    /* glass effect */
    -webkit-backdrop-filter: blur(8px) saturate(110%);
    backdrop-filter: blur(8px) saturate(110%);
}

/* When hovering grid, all non-hovered tiles stay invisible */
.home-grid:hover .grid-item:not(:hover):not(.inactive) {
    opacity: 0;
    background: transparent;
    color: rgba(255,255,255,0);
}

/* When grid not hovered at all, everything hidden */
.home-grid:not(:hover) .grid-item:not(.inactive) {
    opacity: 0;
    background: transparent;
    color: transparent;
}

/* entrance animation (optional, fade in on load) */
.grid-item:not(.inactive) {
    animation: gridFadeIn var(--grid-entrance-duration)
    cubic-bezier(0.4,0,0.2,1) forwards;
    animation-delay: calc(var(--i,0) * var(--grid-entrance-stagger));
}
@keyframes gridFadeIn {
    0%   { opacity: 0; transform: scale(0.96); }
    60%  { opacity: 0.12; transform: scale(1.01); }
    100% { opacity: 1; transform: scale(1); }
}

/* hover polish */
.grid-item:hover img { opacity: 1; transform: scale(1.03); }
.grid-item:hover .grid-btn {
    color: #fff;
    background: rgba(255,255,255,0.14);
    transform: translateY(-3px);
}

.grid-item .grid-btn {
    opacity: 0;
    pointer-events: none;
    transform: translateY(6px);
    transition:
            opacity var(--trans-fast) ease,
            transform var(--trans-fast) ease;
}

/* reveal when the parent grid item is hovered/focused */
.grid-item:hover .grid-btn,
.grid-item:focus-within .grid-btn {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

/* keep button visible and usable on active click */
.grid-item:active .grid-btn {
    opacity: 1;
    transform: translateY(1px);
}

/* optional: when grid not hovered at all, ensure hidden */
.home-grid:not(:hover) .grid-btn {
    opacity: 0;
    pointer-events: none;
}

/* optional: accessibility fallback */
@media (prefers-reduced-motion: reduce) {
    .grid-item .grid-btn {
        transition: none !important;
        transform: none !important;
    }
}

/* accessibility */
@media (prefers-reduced-motion: reduce) {
    .grid-item {
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
    }
}
