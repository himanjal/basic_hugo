/* hover-carousal.css — Wave bounce + decay + brightness/shadow
   Containers resize, bounce, and brighten on hover; neighbors decay.
   Images remain fixed-size inside containers and are cropped (overflow hidden).
*/

/* ---------- VARIABLES (tweak these) ---------- */
:root{
    --gap: 6px;
    --min-gap: 1px;

    --tile-min: 56px;
    --tile-preferred: 86px;
    --tile-max: 160px;

    --tile-aspect-w: 4;
    --tile-aspect-h: 5;
    --hc-min-aspect-wh: 0.25; /* 1:4 */
    --hc-max-aspect-wh: 0.6666667; /* 2:3 */

    --carousel-height: clamp(180px, 36vh, 320px);
    --hc-max-aspect: 3;
    /* max width the carousel can grow to (px) */
    --carousel-max-width: 1300px;
    --carousel-min-tile-width: 120;  /* JS reads this as minimum tile width (px) */

    /* minimum width to maintain good layout (px) */
    --carousel-min-width: 320px;

    /* how much horizontal padding to keep on each side of carousel (px)
       used to keep breathing room for expanded tiles */
    --carousel-side-padding: 50px;

    /* desired width:height aspect ratio for the carousel (width / height).
       Example: 4 => carousel_width / carousel_height = 4 (so height = width / 4) */
    --carousel-aspect: 4;

    /* maximum carousel height (px) — do not let height exceed this even if width implies larger */
    --carousel-max-height: 340px;


    /* wave tuning */
    --hover-width-boost: 2;      /* hovered width multiplier */
    --hover-height-boost: 1.4;    /* hovered height multiplier */
    --hover-bounce-px: 22;         /* how high hovered container bounces (px) */
    --decay-factor: 0.7;          /* per-step decay multiplier for neighbor effect */
    --decay-steps: 4;              /* how many neighbors get effect */
    --hover-push-px: 18;           /* maximum horizontal push for immediate neighbors (px) */
    --push-decay-factor: 0.55;     /* decay per step for horizontal push (keeps consistent with vertical) */


    /* brightness/shadow */
    --dimmer: 0.1;                /* default brightness */
    --bright-max: 1;               /* brightness at hover */
    --shadow-base: 0 8px 28px rgba(0,0,0,0.28);   /* default */
    --shadow-max: 0 36px 120px rgba(0,0,0,0.66);  /* hover shadow */

    /* image sizing inside container */
    --min-img-mult: 1.35;
    --max-img-mult: 2.0;

    --transition: 260ms cubic-bezier(.2,.9,.25,1);
    --img-border-radius: 6px;
}

/* ---------- base ---------- */
* { box-sizing: border-box; }
html,body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    overflow-x: hidden;

}

/* outer wrapper */
.featured-carousel {
    width: 70vw;
    max-width: 1400px;
    max-height: 50vh;
    margin: 2rem auto;
    padding: 0 1rem;
    overflow: visible;
    padding-inline: max(16px, var(--carousel-side-padding));
    box-sizing: border-box;
    margin-inline: auto;
}

/* carousel strip */
.hover-carousel {
    display: flex;
    gap: max(var(--gap), var(--min-gap));
    height: var(--carousel-height);
    box-sizing: border-box;
    width: 100%;
    max-width: var(--carousel-max-width, 1300px);
    margin-inline: auto;      /* center */
    padding-inline: 0;        /* JS will add further hover padding safely */
    overflow: visible;        /* allow items to overflow visually, but outer container prevents page bleed */
    position: relative;
    align-items: center;
}

/* container baseline */
.hc-container {
    flex: 0 0 auto;             /* DO NOT let the container shrink/fill; widths come from JS */
    width: var(--tile-preferred);/* fallback width for CSS-only nocode case */
    min-width: calc(var(--carousel-min-tile-width, 120px));
    aspect-ratio: calc(var(--tile-aspect-w) / var(--tile-aspect-h));
    box-sizing: border-box;
    overflow: hidden;
    position: relative;
    transition: box-shadow var(--transition);
    will-change: width, height, transform;
}

/* focused/hover class applied by JS for accessibility */
.hc-container.in-focus { box-shadow: var(--shadow-max); }

/* image inside container (fixed-size behavior)
   JS will size image (width/height) and set integer left/top to center it.
*/
.hc-img {
    position: absolute;
    left: 0;
    top: 0;
    width: calc(var(--min-img-mult) * 100%); /* fallback */
    height: auto;
    object-fit: cover;
    pointer-events: none;
    user-select: none;
    -webkit-user-drag: none;
    image-rendering: auto;
    backface-visibility: hidden;
    will-change: left, top, filter;
    background: transparent;
    transition: filter var(--transition) ease;
}

/* default dim and shadow (will be overwritten inline by JS targets) */
.hc-img { filter: brightness(var(--dimmer)); }
.hc-container { box-shadow: var(--shadow-base); }

/* responsive adjustments */
@media (max-width: 900px) {
    :root {
        --carousel-side-padding: 16px;
        --carousel-aspect: 4.5;          /* slightly shorter strip */
        --carousel-max-width: 750px;
        --img-height-mult: 1.35;
        --hover-width-boost: 1.25;       /* smaller width increases */
        --hover-height-boost: 1.12;
        --hover-push-px: 8;
        --decay-steps: 3;
        --hc-max-aspect: 3;
    }

    /* reduce spacing around carousel */
    .featured-carousel { padding: 1.25rem 1.25rem 0.5rem; }
}


/* Narrow phones and tablets */
@media (max-width: 640px) {
    :root {
        --carousel-side-padding: 12px;
        /*--carousel-aspect: 5.5;        !* even shorter strip to save vertical space *!*/
        --carousel-max-width: 500px;
        --img-height-mult: 1.2;
        --hover-width-boost: 1.08;     /* almost no width growth */
        --hover-height-boost: 1.06;
        --hover-push-px: 4;
        --decay-steps: 2;
        --hc-max-aspect: 2.6;
        --min-img-mult: 1.05;
        --max-img-mult: 1.8;
        --dimmer: 0.35;
    }

    .featured-carousel { padding: 0.75rem 0.75rem 0.5rem; }
}


/* Pointer-coarse / no-hover devices (touch) -> simplify visuals and disable hover animations entirely */
@media (hover: none), (pointer: coarse) {
    :root {
        --hover-width-boost: 1.0;      /* no width growth on touch */
        --hover-height-boost: 1.0;     /* no height growth on touch */
        --hover-push-px: 0;
        --hover-bounce-px: 0;
        --decay-factor: 0.5;
        --decay-steps: 0;
        --inertia: 0.25;
    }

    /* reduce shadows and animation cost */
    .hc-container { transition: box-shadow 180ms linear; }
    .hc-img { transition: opacity 160ms linear, filter 160ms linear; }
}


